<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Article wrapper</title><meta charset="utf-8" /><meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.0.9a5" /><link rel="stylesheet" type="text/css" href="../../resources/base/css/default.css" /><script type="text/javascript" src="../../resources/base/js/dbmodnizr.js"></script><link href="../../resources/base/css/db-noprism.css" rel="stylesheet" type="text/css" /></head><body><article id="R.1" class="article"><header class="article-titlepage"><h2>Article wrapper</h2></header><div class="numbered-verbatim"><table border="0"><tr><td align="right" valign="top"><pre class="line-numbers"><code class="line-number">1</code>
<code class="line-number">2</code>
<code class="line-number">3</code>
<code class="line-number">4</code>
<code class="line-number">5</code>
<code class="line-number">6</code>
<code class="line-number">7</code>
<code class="line-number">8</code>
<code class="line-number">9</code>
<code class="line-number">10</code>
<code class="line-number">11</code>
<code class="line-number">12</code>
<code class="line-number">13</code>
<code class="line-number">14</code>
<code class="line-number">15</code>
</pre></td><td valign="top"><pre class="programlisting"><code>#!/usr/bin/perl -- # --*-Perl-*--

use Getopt::Std;

$usage = "Usage: $0 [-q] [-u|-p|-m] file [ file ... ]\n";

die $usage if ! getopts('qupm');

die $usage if ($opt_p + $opt_u + $opt_m) != 1;

$file = shift @ARGV || die $usage;

$opt = '-u' if $opt_u;
$opt = '-p' if $opt_p;
$opt = '-m' if $opt_m;</code></pre></td></tr></table></div><p>This paragraph interrupts the listing. The line numbering
continues in the following listing.
</p><div class="numbered-verbatim"><table border="0"><tr><td align="right" valign="top"><pre class="line-numbers"><code class="line-number">16</code>
<code class="line-number">17</code>
<code class="line-number">18</code>
<code class="line-number">19</code>
<code class="line-number">20</code>
<code class="line-number">21</code>
<code class="line-number">22</code>
<code class="line-number">23</code>
<code class="line-number">24</code>
<code class="line-number">25</code>
<code class="line-number">26</code>
<code class="line-number">27</code>
<code class="line-number">28</code>
<code class="line-number">29</code>
<code class="line-number">30</code>
<code class="line-number">31</code>
<code class="line-number">32</code>
<code class="line-number">33</code>
<code class="line-number">34</code>
<code class="line-number">35</code>
<code class="line-number">36</code>
<code class="line-number">37</code>
<code class="line-number">38</code>
</pre></td><td valign="top"><pre class="programlisting"><code>while ($file) {
    print "Converting $file to $opt linebreaks.\n" if !$opt_q;
    open (F, "$file");
    binmode F;
    read (F, $_, -s $file);
    close (F);

    s/\r\n/\n/sg;
    s/\r/\n/sg;

    if ($opt eq '-p') {
	s/\n/\r\n/sg;
    } elsif ($opt eq '-m') {
	s/\n/\r/sg;
    }

    open (F, "&gt;$file");
    binmode F;
    print F $_;
    close (F);

    $file = shift @ARGV;
}</code></pre></td></tr></table></div></article></body></html>